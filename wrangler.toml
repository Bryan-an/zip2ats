#:schema node_modules/wrangler/config-schema.json
name = "zip2ats"
compatibility_date = "2025-01-10"
compatibility_flags = ["nodejs_compat"]

# Pages configuration for Next.js
pages_build_output_dir = ".vercel/output/static"

# =====================================================
# D1 Database Binding
# =====================================================
[[d1_databases]]
binding = "DB"
database_name = "zip2ats-db"
database_id = "9d6f517d-81c0-43c1-93d3-e4c06c0fccba"
migrations_dir = "db/migrations"

# For local development (creates a local SQLite database)
# Run: npx wrangler d1 create zip2ats-db
# Then copy the database_id from the output

# =====================================================
# Environment Variables
# =====================================================
[vars]
ENVIRONMENT = "development"

# =====================================================
# Production Environment
# =====================================================
[env.production]
name = "zip2ats-production"

[env.production.vars]
ENVIRONMENT = "production"

[[env.production.d1_databases]]
binding = "DB"
database_name = "zip2ats-db-production"
database_id = "your-production-database-id-here"

# =====================================================
# Secrets (set via CLI)
# =====================================================
# Run: npx wrangler secret put JWT_SECRET
# Run: npx wrangler secret put CLERK_SECRET_KEY (if using Clerk)
# etc.
