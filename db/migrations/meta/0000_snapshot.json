{
  "version": "6",
  "dialect": "sqlite",
  "id": "aa77e199-52e2-4270-b0ec-06b5ecebe0bb",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "ats_reports": {
      "name": "ats_reports",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "periodo": {
          "name": "periodo",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tipo_reporte": {
          "name": "tipo_reporte",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "document_ids": {
          "name": "document_ids",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_documents": {
          "name": "total_documents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "formato": {
          "name": "formato",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "generated_at": {
          "name": "generated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "downloaded_at": {
          "name": "downloaded_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_reports_user": {
          "name": "idx_reports_user",
          "columns": ["user_id"],
          "isUnique": false
        },
        "idx_reports_periodo": {
          "name": "idx_reports_periodo",
          "columns": ["periodo"],
          "isUnique": false
        },
        "idx_reports_generated_at": {
          "name": "idx_reports_generated_at",
          "columns": ["generated_at"],
          "isUnique": false
        },
        "idx_reports_user_periodo": {
          "name": "idx_reports_user_periodo",
          "columns": ["user_id", "periodo"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "ats_reports_user_id_users_id_fk": {
          "name": "ats_reports_user_id_users_id_fk",
          "tableFrom": "ats_reports",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "audit_logs": {
      "name": "audit_logs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_audit_user": {
          "name": "idx_audit_user",
          "columns": ["user_id"],
          "isUnique": false
        },
        "idx_audit_created_at": {
          "name": "idx_audit_created_at",
          "columns": ["created_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "audit_logs_user_id_users_id_fk": {
          "name": "audit_logs_user_id_users_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "documents": {
      "name": "documents",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "batch_id": {
          "name": "batch_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tipo_documento": {
          "name": "tipo_documento",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "numero_autorizacion": {
          "name": "numero_autorizacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "clave_acceso": {
          "name": "clave_acceso",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "emisor_ruc": {
          "name": "emisor_ruc",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "emisor_razon_social": {
          "name": "emisor_razon_social",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "receptor_identificacion": {
          "name": "receptor_identificacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "receptor_tipo_identificacion": {
          "name": "receptor_tipo_identificacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "receptor_razon_social": {
          "name": "receptor_razon_social",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "fecha_emision": {
          "name": "fecha_emision",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "fecha_autorizacion": {
          "name": "fecha_autorizacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "subtotal_sin_impuestos": {
          "name": "subtotal_sin_impuestos",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "subtotal_iva_0": {
          "name": "subtotal_iva_0",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "subtotal_iva_12": {
          "name": "subtotal_iva_12",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "subtotal_iva_15": {
          "name": "subtotal_iva_15",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "iva": {
          "name": "iva",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "ice": {
          "name": "ice",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "irbpnr": {
          "name": "irbpnr",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "propina": {
          "name": "propina",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "total": {
          "name": "total",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "retencion_iva": {
          "name": "retencion_iva",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "retencion_renta": {
          "name": "retencion_renta",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "forma_pago": {
          "name": "forma_pago",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "xml_hash": {
          "name": "xml_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "procesamiento_status": {
          "name": "procesamiento_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'success'"
        },
        "procesamiento_errores": {
          "name": "procesamiento_errores",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_documents_batch": {
          "name": "idx_documents_batch",
          "columns": ["batch_id"],
          "isUnique": false
        },
        "idx_documents_tipo": {
          "name": "idx_documents_tipo",
          "columns": ["tipo_documento"],
          "isUnique": false
        },
        "idx_documents_fecha_emision": {
          "name": "idx_documents_fecha_emision",
          "columns": ["fecha_emision"],
          "isUnique": false
        },
        "idx_documents_clave_acceso": {
          "name": "idx_documents_clave_acceso",
          "columns": ["clave_acceso"],
          "isUnique": false
        },
        "idx_documents_hash": {
          "name": "idx_documents_hash",
          "columns": ["xml_hash"],
          "isUnique": false
        },
        "idx_documents_emisor_ruc": {
          "name": "idx_documents_emisor_ruc",
          "columns": ["emisor_ruc"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "documents_batch_id_upload_batches_id_fk": {
          "name": "documents_batch_id_upload_batches_id_fk",
          "tableFrom": "documents",
          "tableTo": "upload_batches",
          "columnsFrom": ["batch_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "sri_catalogs": {
      "name": "sri_catalogs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "catalog_type": {
          "name": "catalog_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "active": {
          "name": "active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        }
      },
      "indexes": {
        "idx_catalogs_type": {
          "name": "idx_catalogs_type",
          "columns": ["catalog_type"],
          "isUnique": false
        },
        "idx_catalogs_type_code": {
          "name": "idx_catalogs_type_code",
          "columns": ["catalog_type", "code"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "upload_batches": {
      "name": "upload_batches",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "original_filename": {
          "name": "original_filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "total_files": {
          "name": "total_files",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "processed_files": {
          "name": "processed_files",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "failed_files": {
          "name": "failed_files",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "uploaded_at": {
          "name": "uploaded_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_batches_user": {
          "name": "idx_batches_user",
          "columns": ["user_id"],
          "isUnique": false
        },
        "idx_batches_status": {
          "name": "idx_batches_status",
          "columns": ["status"],
          "isUnique": false
        },
        "idx_batches_uploaded_at": {
          "name": "idx_batches_uploaded_at",
          "columns": ["uploaded_at"],
          "isUnique": false
        },
        "idx_batches_user_status_date": {
          "name": "idx_batches_user_status_date",
          "columns": ["user_id", "status", "uploaded_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "upload_batches_user_id_users_id_fk": {
          "name": "upload_batches_user_id_users_id_fk",
          "tableFrom": "upload_batches",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "user_settings": {
      "name": "user_settings",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "auto_process_uploads": {
          "name": "auto_process_uploads",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "duplicate_detection": {
          "name": "duplicate_detection",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "default_report_format": {
          "name": "default_report_format",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'xlsx'"
        },
        "include_notes_in_ats": {
          "name": "include_notes_in_ats",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "email_on_process_complete": {
          "name": "email_on_process_complete",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "email_on_process_error": {
          "name": "email_on_process_error",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "notification_email": {
          "name": "notification_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_settings_user_id_users_id_fk": {
          "name": "user_settings_user_id_users_id_fk",
          "tableFrom": "user_settings",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'member'"
        },
        "auth_provider_id": {
          "name": "auth_provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "users_email_unique": {
          "name": "users_email_unique",
          "columns": ["email"],
          "isUnique": true
        },
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": ["email"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
